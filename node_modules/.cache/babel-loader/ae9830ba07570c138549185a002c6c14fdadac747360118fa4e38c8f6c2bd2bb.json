{"ast":null,"code":"var _jsxFileName = \"D:\\\\Intermship\\\\Project1\\\\resevetable\\\\src\\\\pages\\\\CRUD\\\\EditPage.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { Form, useForm } from \"react-final-form\";\nimport { redirect, useNavigate, useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nasync function updateTable(id, updatedTable) {\n  try {\n    let response = await fetch(`/table/${id}`, {\n      method: \"PUT\",\n      body: JSON.stringify(updatedTable),\n      headers: new Headers({\n        \"Content-Type\": \"application/json\"\n      })\n    });\n    if (!response.ok) {\n      throw new Error(`Could not update Table ${id}`);\n    }\n    return response.json();\n  } catch (error) {\n    console.error(\"Error:\", error);\n    throw error;\n  }\n}\nexport async function updateAction(_ref) {\n  let {\n    values,\n    params\n  } = _ref;\n  const {\n    id\n  } = params;\n  const updatedTable = {\n    id,\n    ...values\n  };\n  await updateTable(id, updatedTable);\n  return redirect(`/admin/`);\n}\nexport default function EditTable() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    handleSubmit,\n    submitting\n  } = useForm();\n  const [table, setTable] = useState();\n  useEffect(() => {\n    async function fetchTable() {\n      const response = await fetch(`/table/${id}`);\n      const data = await response.json();\n      setTable(data);\n    }\n    fetchTable();\n  }, [id]);\n  const onSubmit = async values => {\n    try {\n      await handleSubmit(updateAction)({\n        values,\n        params: {\n          id\n        }\n      });\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  };\n  if (!table) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: onSubmit,\n    initialValues: {\n      table_number: table.table_number,\n      available: table.available.toString()\n    },\n    children: _ref2 => {\n      let {\n        handleSubmit\n      } = _ref2;\n      return /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Table\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"table_number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Status\", /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"available\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"true\",\n              children: \"Available\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"false\",\n              children: \"Booked\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bt-submit\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bt-s\",\n            type: \"submit\",\n            disabled: submitting,\n            children: \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bt-cancel\",\n            type: \"button\",\n            onClick: () => {\n              navigate(-1);\n            },\n            children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(EditTable, \"SsirY6OW7FHRlOXNXxRWnNa39AU=\", false, function () {\n  return [useParams, useNavigate, useForm];\n});\n_c = EditTable;\nvar _c;\n$RefreshReg$(_c, \"EditTable\");","map":{"version":3,"names":["useEffect","useState","Form","useForm","redirect","useNavigate","useParams","jsxDEV","_jsxDEV","updateTable","id","updatedTable","response","fetch","method","body","JSON","stringify","headers","Headers","ok","Error","json","error","console","updateAction","_ref","values","params","EditTable","_s","navigate","handleSubmit","submitting","table","setTable","fetchTable","data","onSubmit","children","fileName","_jsxFileName","lineNumber","columnNumber","initialValues","table_number","available","toString","_ref2","type","name","value","className","disabled","onClick","_c","$RefreshReg$"],"sources":["D:/Intermship/Project1/resevetable/src/pages/CRUD/EditPage.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Form, useForm } from \"react-final-form\";\r\nimport { redirect, useNavigate, useParams } from \"react-router-dom\";\r\n\r\nasync function updateTable(id, updatedTable) {\r\n  try {\r\n    let response = await fetch(`/table/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(updatedTable),\r\n      headers: new Headers({\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Could not update Table ${id}`);\r\n    }\r\n    return response.json();\r\n  } catch (error) {\r\n    console.error(\"Error:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function updateAction({ values, params }) {\r\n  const { id } = params;\r\n  const updatedTable = { id, ...values };\r\n  await updateTable(id, updatedTable);\r\n  return redirect(`/admin/`);\r\n}\r\n\r\nexport default function EditTable() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { handleSubmit, submitting } = useForm();\r\n\r\n  const [table, setTable] = useState();\r\n  useEffect(() => {\r\n    async function fetchTable() {\r\n      const response = await fetch(`/table/${id}`);\r\n      const data = await response.json();\r\n      setTable(data);\r\n    }\r\n    fetchTable();\r\n  }, [id]);\r\n\r\n  const onSubmit = async (values) => {\r\n    try {\r\n      await handleSubmit(updateAction)({ values, params: { id } });\r\n    } catch (error) {\r\n      console.error(\"Error:\", error);\r\n    }\r\n  };\r\n\r\n  if (!table) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <Form\r\n      onSubmit={onSubmit}\r\n      initialValues={{\r\n        table_number: table.table_number,\r\n        available: table.available.toString(),\r\n      }}\r\n    >\r\n      {({ handleSubmit }) => (\r\n        <form onSubmit={handleSubmit}>\r\n          <label>\r\n            Table\r\n            <input type=\"text\" name=\"table_number\" />\r\n          </label>\r\n          <label>\r\n            Status\r\n            <select name=\"available\">\r\n              <option value=\"true\">Available</option>\r\n              <option value=\"false\">Booked</option>\r\n            </select>\r\n          </label>\r\n\r\n          <div className=\"bt-submit\">\r\n            <button className=\"bt-s\" type=\"submit\" disabled={submitting}>\r\n              บันทึก\r\n            </button>\r\n            <button\r\n              className=\"bt-cancel\"\r\n              type=\"button\"\r\n              onClick={() => {\r\n                navigate(-1);\r\n              }}\r\n            >\r\n              ยกเลิก\r\n            </button>\r\n          </div>\r\n        </form>\r\n      )}\r\n    </Form>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}