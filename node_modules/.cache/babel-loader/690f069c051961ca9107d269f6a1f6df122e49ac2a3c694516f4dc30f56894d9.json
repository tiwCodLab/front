{"ast":null,"code":"var _jsxFileName = \"D:\\\\Intermship\\\\Project1\\\\resevetable\\\\src\\\\component\\\\RequireAuth.js\",\n  _s = $RefreshSig$();\nimport { useLocation, Navigate, Outlet } from \"react-router-dom\";\nimport { useAuth } from \"../utils/AuthProvider\";\nimport Spinner from \"./Spinner\";\nimport usePermission from \"../utils/usePermission\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RequireAuth = _ref => {\n  _s();\n  var _auth$user;\n  let {\n    allowedRoles\n  } = _ref;\n  const auth = useAuth();\n  const {\n    hasPermission\n  } = usePermission();\n  const location = useLocation();\n  const hasRequiredRole = hasPermission(allowedRoles);\n  if (auth !== null && auth !== void 0 && auth.isLoading) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 12\n    }, this); // or loading indicator/spinner/etc\n  } else if ((_auth$user = auth.user) !== null && _auth$user !== void 0 && _auth$user.email) {\n    if (hasRequiredRole) {\n      return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/unauthorize\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 14\n      }, this);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\",\n    state: {\n      from: location.pathname\n    },\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 10\n  }, this);\n};\n_s(RequireAuth, \"jXSXdyLGO2SyLZSUpKjxq/BFRMo=\", false, function () {\n  return [useAuth, usePermission, useLocation];\n});\n_c = RequireAuth;\nexport default RequireAuth;\nvar _c;\n$RefreshReg$(_c, \"RequireAuth\");","map":{"version":3,"names":["useLocation","Navigate","Outlet","useAuth","Spinner","usePermission","jsxDEV","_jsxDEV","RequireAuth","_ref","_s","_auth$user","allowedRoles","auth","hasPermission","location","hasRequiredRole","isLoading","fileName","_jsxFileName","lineNumber","columnNumber","user","email","to","replace","state","from","pathname","_c","$RefreshReg$"],"sources":["D:/Intermship/Project1/resevetable/src/component/RequireAuth.js"],"sourcesContent":["import { useLocation, Navigate, Outlet } from \"react-router-dom\";\r\nimport { useAuth } from \"../utils/AuthProvider\";\r\nimport Spinner from \"./Spinner\";\r\nimport usePermission from \"../utils/usePermission\";\r\nconst RequireAuth = ({ allowedRoles }) => {\r\n  const auth = useAuth();\r\n  const { hasPermission } = usePermission();\r\n  const location = useLocation();\r\n  const hasRequiredRole = hasPermission(allowedRoles);\r\n\r\n  if (auth?.isLoading) {\r\n    return <Spinner />; // or loading indicator/spinner/etc\r\n  } else if (auth.user?.email) {\r\n    if (hasRequiredRole) {\r\n      return <Outlet />;\r\n    } else {\r\n      return <Navigate to=\"/unauthorize\" replace />;\r\n    }\r\n  }\r\n  return <Navigate to=\"/login\" state={{ from: location.pathname }} replace />;\r\n};\r\nexport default RequireAuth;\r\n"],"mappings":";;AAAA,SAASA,WAAW,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,kBAAkB;AAChE,SAASC,OAAO,QAAQ,uBAAuB;AAC/C,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,aAAa,MAAM,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AACnD,MAAMC,WAAW,GAAGC,IAAA,IAAsB;EAAAC,EAAA;EAAA,IAAAC,UAAA;EAAA,IAArB;IAAEC;EAAa,CAAC,GAAAH,IAAA;EACnC,MAAMI,IAAI,GAAGV,OAAO,CAAC,CAAC;EACtB,MAAM;IAAEW;EAAc,CAAC,GAAGT,aAAa,CAAC,CAAC;EACzC,MAAMU,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAC9B,MAAMgB,eAAe,GAAGF,aAAa,CAACF,YAAY,CAAC;EAEnD,IAAIC,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEI,SAAS,EAAE;IACnB,oBAAOV,OAAA,CAACH,OAAO;MAAAc,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,CAAC,CAAC;EACtB,CAAC,MAAM,KAAAV,UAAA,GAAIE,IAAI,CAACS,IAAI,cAAAX,UAAA,eAATA,UAAA,CAAWY,KAAK,EAAE;IAC3B,IAAIP,eAAe,EAAE;MACnB,oBAAOT,OAAA,CAACL,MAAM;QAAAgB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IACnB,CAAC,MAAM;MACL,oBAAOd,OAAA,CAACN,QAAQ;QAACuB,EAAE,EAAC,cAAc;QAACC,OAAO;MAAA;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAC/C;EACF;EACA,oBAAOd,OAAA,CAACN,QAAQ;IAACuB,EAAE,EAAC,QAAQ;IAACE,KAAK,EAAE;MAAEC,IAAI,EAAEZ,QAAQ,CAACa;IAAS,CAAE;IAACH,OAAO;EAAA;IAAAP,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AAC7E,CAAC;AAACX,EAAA,CAhBIF,WAAW;EAAA,QACFL,OAAO,EACME,aAAa,EACtBL,WAAW;AAAA;AAAA6B,EAAA,GAHxBrB,WAAW;AAiBjB,eAAeA,WAAW;AAAC,IAAAqB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}